<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Taiwan Weather</title>
    <meta name="viewport" content="width=1920" />
    <title>WEATHER</title>
    <link rel="stylesheet" href="../message/public.css"/>
    <link rel="stylesheet" href="../wea/css/weather.css"/>
</head>
<body>
<div class="tvmain">
  <div class="tvcontent" style="background-image: url(image/bg_weather.jpg); ">
     <div class="main-title" id="taiwan">台灣氣象</div>
     <div class="weather-menu">
       <a href="javascript:;" onclick="openpage(this,'tinfo.html?loc=jls#city2306188');" onfocus="setLocImg('img_njls.png')">基隆市</a>
       <a href="javascript:;" onclick="openpage(this,'tinfo.html?loc=tbs#city2306179');" onfocus="setLocImg('img_ntbs.png')">臺北市</a>
       <a href="javascript:;" onclick="openpage(this,'tinfo.html?loc=xbs#city20070569');" onfocus="setLocImg('img_nxbs.png')">新北市</a>
       <a href="javascript:;" onclick="openpage(this,'tinfo.html?loc=tys#city2347345');" onfocus="setLocImg('img_ntys.png')">桃園市</a>
       <a href="javascript:;" onclick="openpage(this,'tinfo.html?loc=xzs#city2306185');" onfocus="setLocImg('img_nxzs.png')">新竹市</a>
       <a href="javascript:;" onclick="openpage(this,'tinfo.html?loc=xzx#city2347334');" onfocus="setLocImg('img_nxzx.png')">新竹縣</a>
       <a href="javascript:;" onclick="openpage(this,'tinfo.html?loc=mlx#city2347338');" onfocus="setLocImg('img_nmlx.png')">苗栗縣</a>
     </div>
     <div class="weather-menu4">
       <a href="javascript:;" onclick="openpage(this,'tinfo.html?loc=ljx#city28760734');" onfocus="setLocImg('img_wljx.png')">連江縣</a>
     </div>
     <div class="weather-menu3">
       <a href="javascript:;" onclick="openpage(this,'tinfo.html?loc=tzs#city2306181');" onfocus="setLocImg('img_ctzs.png')">台中市</a>
       <a href="javascript:;" onclick="openpage(this,'tinfo.html?loc=ntx#city2347339');" onfocus="setLocImg('img_cntx.png')">南投縣</a>
       <a href="javascript:;" onclick="openpage(this,'tinfo.html?loc=jys#city2296315');" onfocus="setLocImg('img_cjys.png')">嘉義市</a>
       <span class="spacediv"></span>
       <a href="javascript:;" onclick="openpage(this,'tinfo.html?loc=tns#city2306182');" onfocus="setLocImg('img_stns.png')">台南市</a>
       <span class="spacediv2"></span>
       <a href="javascript:;" onclick="openpage(this,'tinfo.html?loc=jmx#city28760735');" onfocus="setLocImg('img_wjmx.png')">金門縣</a>
     </div>
     <div class="weather-menu2">
       <a href="javascript:;" onclick="openpage(this,'tinfo.html?loc=ylx#city2347336');" onfocus="setLocImg('img_eylx.png')">宜蘭縣</a>
       <a href="javascript:;" onclick="openpage(this,'tinfo.html?loc=hlx#city2347335');" onfocus="setLocImg('img_ehlx.png')">花蓮縣</a>
       <a href="javascript:;" onclick="openpage(this,'tinfo.html?loc=tds#city2306190');" onfocus="setLocImg('img_etds.png')">台東市</a>
       <span class="spacediv"></span>
       <a href="javascript:;" onclick="openpage(this,'tinfo.html?loc=zhx#city20070572');" onfocus="setLocImg('img_czhx.png')">彰化縣</a>
       <a href="javascript:;" onclick="openpage(this,'tinfo.html?loc=ylx#city2347346');" onfocus="setLocImg('img_cylx.png')">雲林縣</a>
       <a href="javascript:;" onclick="openpage(this,'tinfo.html?loc=jyx#city7153409');" onfocus="setLocImg('img_cjyx.png')">嘉義縣</a>
       <span class="spacediv"></span>
       <a href="javascript:;" onclick="openpage(this,'tinfo.html?loc=gxs#city2306180');" onfocus="setLocImg('img_sgxs.png')">高雄市</a>
       <a href="javascript:;" onclick="openpage(this,'tinfo.html?loc=pdx#city2347340');" onfocus="setLocImg('img_spdx.png')">屏東縣</a>
       <span class="spacediv"></span>
       <a href="javascript:;" onclick="openpage(this,'tinfo.html?loc=phx#city22695856');" onfocus="setLocImg('img_wphx.png')">澎湖縣</a>
     </div>
     <img id="weather_loc" 
      class="weather-loc"
      src="../wea/image/img_ntbs.png" />
  </div>
  <div class="remoterhint"></div>
</div>
</body>
</html>
<script type="text/javascript">

function openpage(obj,url){
  var ele = obj;

  var eles = document.getElementsByTagName("a");
  for( var i=0; i<eles.length; i++ ) {
    if ( eles[i] == ele ) {
      sessionStorage.setItem("WAECITYINFOIDX", i);
      break;
    }
  }
  location.href = url;
}

setTimeout( function() {

  document.getElementById("taiwan").innerHTML = TR("Taiwan");
  var eles = document.getElementsByTagName("a");
  for( var i = 0; i<eles.length; i++) {
    var key = eles[i].innerHTML;
    console.log("set lang :" + key);
    eles[i].innerHTML = TR(key);
  }


  //http://sugg.us.search.yahoo.net/gossip-gl-location/?appid=weather&output=json&command=los
  var locationInfo = {
      'city' : [
        [ TR("基隆市"), "2306188"],
        [TR("臺北市"), "2306179"],
        [TR("新北市"), "20070569"],
        [TR("桃園市"), "2347345"],
        [TR("新竹市"), "2306185"],
        [TR("新竹縣"), "2347334"],
        [TR("苗栗縣"), "2347338"],
        [TR("連江縣"), "28760734", "28760735"],
        [TR("台中市"), "2306181"],
        [TR("南投縣"), "2347339"],
        [TR("嘉義市"), "2296315"],
        [TR("台南市"), "2306182"],
        [TR("金門縣"), "28760735"],
        [TR("宜蘭縣"), "2347336"],
        [TR("花蓮縣"), "2347335"],
        [TR("台東市"), "2306190"],
        [TR("彰化縣"), "20070572"],
        [TR("雲林縣"), "2347346"],
        [TR("嘉義縣"), "7153409"],
        [TR("高雄市"), "2306180"],
        [TR("屏東縣"), "2347340"],
        [TR("澎湖縣"), "22695856"]
      ],
    'title' :  TR('台灣')};

  sessionStorage.setItem("location", JSON.stringify(locationInfo) );

}, 50 );

function setLocImg(imgname) {
  document.getElementById('weather_loc').src="./image/" + imgname;
}


</script>

<script type="text/javascript" src="player/js/key.js"></script>
<script type="text/javascript" src="../video/public/js/lang.js"></script>
<script type="text/javascript">
function setlastl() {
  var idx = sessionStorage.getItem("WAECITYINFOIDX");
  if( ! isNaN(idx) ) {
    sessionStorage.removeItem("WAECITYINFOIDX");
    var eles = document.getElementsByTagName("a");
    if( idx < eles.length ) {
      VatataKeyMove.initById( eles[idx] );
      var cele = VatataKeyMove.getCurrentEle();
      if( cele != eles[0] ) {
        eles[0].blur();
        cele.focus();
      }      
    }    
  }

}
setTimeout( setlastl, 500 );

</script>

