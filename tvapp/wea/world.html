<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>World Weather</title>
    <meta name="viewport" content="width=1920" />
    <link rel="stylesheet" href="../message/public.css"/>
    <link rel="stylesheet" href="../wea/css/weather.css"/>
</head>
<body>
<div class="tvmain">
    <div class="weather">
        <div class="main-title" id="world">国际气象</div>
        <div class="weather-menu">
            <a href="javascript:;" id="asia_title" onclick="asiaInfo(this);"  onfocus="setLocImg('img_a.png')">亚洲</a>
            <a href="javascript:;" id="africa_title"  onclick="africaInfo(this);" onfocus="setLocImg('img_af.png')">非洲</a>
            <a href="javascript:;" id="southam_title"  onclick="southamInfo(this);"  onfocus="setLocImg('img_s.png')">南美洲</a>
            <a href="javascript:;" id="northam_title"  onclick="northamInfo(this);"  onfocus="setLocImg('img_n.png')">北美洲/中美洲</a>
            <a href="javascript:;" id="au_title"  onclick="auInfo(this);" onfocus="setLocImg('img_au.png')">澳洲/南太平洋</a>
            <a href="javascript:;" id="eu_title"  onclick="euInfo(this);"  onfocus="setLocImg('img_e.png')">欧洲</a>
        </div>
        <img id="weather_loc"
             class="weather-loc"
             src="../../images/a.png" />
    </div>
    <div class="remoterhint"></div>

</div>
</body>
</html>
<script type="text/javascript" src="../video/public/js/lang.js"></script>
<script type="text/javascript">

    function $(name) {
        return document.getElementById(name);
    }

    $("world").innerHTML = TR("World");
    $("asia_title").innerHTML = TR("asia");
    $("africa_title").innerHTML = TR("africa");
    $("southam_title").innerHTML = TR("southam");
    $("northam_title").innerHTML = TR("northam");
    $("au_title").innerHTML = TR("australia");
    $("eu_title").innerHTML = TR("europe");

    function setLocImg(imgname) {
        console.log("setLocImg on focus " + VatataKeyMove.getCurrentEle().outerHTML  );
        document.getElementById('weather_loc').src="./image/" + imgname;
    }
</script>

<script type="text/javascript">

    function saveLastEle( obj ) {
        var ele = obj;

        var eles = document.getElementsByTagName("a");
        for( var i=0; i<eles.length; i++ ) {
            if ( eles[i] == ele ) {
                sessionStorage.setItem("WAEWORLDCITYINFOIDX", i);
                break;
            }
        }
    }

    //http://sugg.us.search.yahoo.net/gossip-gl-location/?appid=weather&output=json&command=los

    var africaLocInfo = {
        'city' : [
            [ TR("cairo"), "1521894" ],
            [ TR("tripoli"), "1353281"],
            [ TR("tunisia"), "2347256" ],
            [ TR("nairobi"), "1528488" ],
            [ TR("capedown"), "1591691" ],
            [ TR("casablanca"), "1532755"]
        ],
        'title': TR("africa")
    };

    function africaInfo( obj ) {
        saveLastEle(obj);
        sessionStorage.setItem("location", JSON.stringify(africaLocInfo) );
        location.href="tinfo.html";
    }
    /*
    [TR("beijing"), "2151330"],
            [TR("shanghai"), "2151849"],
            [TR("guangzhou"), "2161838"],
            [TR("shenzhen"), "2161853"],
            [TR("hong-kong"), "2165352"],
            [TR("shijiazhuang"),"2171287"],
            [TR("baoding"), '2171290'],
            [TR("tokyo"), "1118370"],
            [TR("seoul"), "20069923"],
            [TR("bangkok"), "2347165"],
            [TR("phnom-penh"), "20070095"],
            [TR("hanoi"), "2347727"],
            [TR("singapore"), "1062617"],
            [TR("manila"), "2444796"],
            [TR("kuala-lumpur"), "1154781"],
            [TR("jakarta"), "1047378"],
            [TR("new-delhi"), "2295019"],
            [TR("islamabad"), "20070149"],
            [TR("teheran"), "2251945"],
            [TR("baghdad"), "2345839"],
            [TR("riyadh"), "1939753"],
            [TR("du-bai"), "2347111"],
            [TR("jerusalem"), "1968222"]
     */

    // Colombo, Galle, Trincomalee , Batticaloa, Anuradhapura, polonnaruwa,
    var asiaCityInfo = {
        'city' : [
            [TR("nuwara-eliya"),"23706511"],
            [TR("colombo"),"2189783"],
            [TR("Kandy"),"2189780"],
            [TR("galle"),"2189781"],
            [TR("trincomalee"),"23706507"],
            [TR("batticaloa"),"23706508"],
            [TR("anuradhapura"),"23706503"],
            [TR("polonnaruwa"),"23706504"]
        ],
        'title': TR("Sri Lanka")
    }

    function asiaInfo( obj ) {
        saveLastEle(obj);
        sessionStorage.setItem("location", JSON.stringify( asiaCityInfo ) );
        location.href="tinfo.html";
    }

    var southamCityInfo = {
        'city'  : [
            [TR("st-paul"), "455827"],
            [TR("rio-de-janeiro"), "455825"],
            [TR("buenos-aires"), "468739"],
            [TR("brasilia"), "455819"],
            [TR("santiago"), "349859"],
        ],
        'title' : TR("southam")
    }
    function southamInfo( obj ) {
        saveLastEle(obj);

        sessionStorage.setItem("location", JSON.stringify( southamCityInfo ) );
        location.href="tinfo.html";
    }

    var northamCityInfo = {
        'city' : [
            [TR("new-york"), "2347591"],
            [TR("losangeles"), "2442047"],
            [TR("honolulu"), "2423945"],
            [TR("las-vegas"), "2436704"],
            [TR("toronto"), "55855612"],
        ],
        'title': TR("northam")
    }
    function northamInfo( obj ) {
        saveLastEle( obj );

        sessionStorage.setItem("location", JSON.stringify( northamCityInfo ) );
        location.href="tinfo.html";
    }

    var auCityInfo = {
        'city' : [
            [TR("sydney"), "55864169"],
        ],
        'title' : TR("australia")
    }
    function auInfo( obj ) {
        saveLastEle( obj );

        sessionStorage.setItem("location", JSON.stringify( auCityInfo ) );
        location.href="tinfo.html";
    }

    var euCityInfo = {
        "city" : [
            [TR("paris"), "615702"],
            [TR("london"), "44418"],
            [TR("berlin"), "638242"],
            [TR("rome"), "721943"],
            [TR("switzerland"), "781739"]
        ],
        "title": TR("europe")
    }

    function euInfo( obj ) {
        saveLastEle( obj );
        sessionStorage.setItem("location", JSON.stringify( euCityInfo ) );
        location.href="tinfo.html";
    }


    setTimeout( function() {
        var eles = document.getElementsByTagName("a");
        for( var i = 0; i<eles.length; i++) {
            var key = eles[i].innerHTML;
            console.log("set lang :" + key);
            eles[i].innerHTML = TR(key);
        }
    }, 500 );



</script>


<script type="text/javascript" src="player/js/key.js"></script>
<script type="text/javascript">
    function checklastsel() {
        var idx = sessionStorage.getItem("WAEWORLDCITYINFOIDX");
        if( idx != null && ! isNaN( parseInt(idx) ) ) {
            console.log("set index : " + idx );
            sessionStorage.removeItem("WAEWORLDCITYINFOIDX");
            var eles = document.getElementsByTagName("a");
            if( idx < eles.length ) {
                VatataKeyMove.initById( eles[idx] );
                var cele = VatataKeyMove.getCurrentEle();
                if( cele != eles[0] ) {
                    eles[0].blur();
                    cele.focus();
                }
            }
        }
    }

    window.addEventListener ('load',function() {
        setTimeout( checklastsel , 1000 );
    },false);


</script>
