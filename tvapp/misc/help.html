<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HELP</title>
    <meta name="viewport" content="width=8000" />
    <link rel="stylesheet" href="../message/public.css"/>
    <link rel="stylesheet" href="../css/help.css"/>
</head>
<body>
<div class="main">
  <div id="helpcont" class="maincont helpcont" style="display:none;" >
  </div>
</div>
</body>
</html>
<script type="text/javascript" src="../video/public/js/config.js"></script>
<script type="text/javascript" src="../video/public/js/jsget.js"></script>
<script type="text/javascript" src="../js/querystring.js"></script>
<script type="text/javascript" src="../../js/cate.js"></script>

<script type="text/javascript">
	document.onkeydown  = function() {
		//history.back();
    var app = wae.create("Application");
    app.finishActivity();
	}


  setTimeout( function(){
    document.getElementById("helpcont").style.display="block";
  }, 1000 * 10 );



  var count = 0;
  var photoItem = new PhotoItem();
  photoItem.timer = null;
  photoItem.onload = function( photoInfo ) {
    var photolist = photoInfo.photolist;

    var imgsrc = photolist[0].logo;
    console.log("help to change background to " + imgsrc );
    photoItem.bgimg = new Image();
    photoItem.bgimg.src = imgsrc;
    photoItem.bgimg.onload = function ()
    {
      document.getElementById("helpcont").style.backgroundImage = "url(" + imgsrc + ")";
    document.getElementById("helpcont").style.display="block";
    } 
    count++;

    if ( photolist.length > 1 ) {
      if ( photoItem.timer != null )
        clearInterval( photoItem.timer );
      photoItem.timer = setInterval( function() {
          var idx = count ++ % photolist.length;
          imgsrc = photolist[idx].logo;

          console.log("help to change background to " + imgsrc );
          photoItem.bgimg.src = imgsrc;
          photoItem.bgimg.onload = function ()
          {
            document.getElementById("helpcont").style.backgroundImage = "url(" + imgsrc + ")";
    document.getElementById("helpcont").style.display="block";
          } 
          // document.getElementById("helpcont").style.backgroundImage = "url(" + imgsrc + ")";
        }, 1000 * 10 );
    }
  }

  var itemList = new ItemList();
  itemList.onload = function( ilist ) {
    photoItem.load( ilist[0].id );
  }


  window.onWAEReady = function(waeObj){
    var settingObj = wae.create("WAE.Setting");
    settingObj.setUseLocalImageCache(true);

    var uiSettings = wae.create("UI.UISettings");
    uiSettings.set1080P();

    var param = wae.create("DATA.Parameters");
    var title = param.get("name");
    var apiUrl = param.get("apiUrl");

    var res = apiUrl.match(new RegExp("cat_id=(\\d+)","i"));
    var cid = apiUrl;
    if ( res ) {
      cid = res[1];
      itemList.load( cid, 1, 50 );
    }
  }

</script>
